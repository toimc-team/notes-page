(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1149:function(e,t,s){"use strict";s.r(t);var a=s(29),i=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"网络调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络调试"}},[e._v("#")]),e._v(" 网络调试")]),e._v(" "),a("h2",{attrs:{id:"charles进行网络调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#charles进行网络调试"}},[e._v("#")]),e._v(" Charles进行网络调试")]),e._v(" "),a("p",[e._v("使用Charles对手机App应用进行抓包，可以对App接口进行测试，也可以了解App传输中流量使用及请求响应情况，从而测试数据传输过程中流量使用的是否合理。")]),e._v(" "),a("p",[e._v("调试设置：")]),e._v(" "),a("p",[a("img",{attrs:{src:s(775),alt:"image-20211002121811552"}})]),e._v(" "),a("p",[e._v("然后选择Enable Throttling就是开启了Proxy延迟：")]),e._v(" "),a("p",[a("img",{attrs:{src:s(776),alt:"image-20211002121859494"}})]),e._v(" "),a("h2",{attrs:{id:"fiddler进行网络调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fiddler进行网络调试"}},[e._v("#")]),e._v(" Fiddler进行网络调试")]),e._v(" "),a("p",[e._v("使用Fiddler对手机App应用进行抓包，可以对App接口进行测试，也可以了解App传输中流量使用及请求响应情况，从而测试数据传输过程中流量使用的是否合理。")]),e._v(" "),a("p",[e._v("抓包过程：")]),e._v(" "),a("h3",{attrs:{id:"fiddler设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fiddler设置"}},[e._v("#")]),e._v(" Fiddler设置")]),e._v(" "),a("p",[e._v("1）启动Fiddler->Tools->Fiddler Options")]),e._v(" "),a("p",[a("img",{attrs:{src:s(777),alt:"image-20211002120732553"}})]),e._v(" "),a("p",[e._v("2）HTTPS选项卡中，设置如下，勾选过程中如有弹窗允许即可；")]),e._v(" "),a("p",[a("img",{attrs:{src:s(778),alt:"image-20211002120754604"}})]),e._v(" "),a("p",[e._v("Connections选项卡中，勾选"),a("code",[e._v("Allow remote computers to connect")]),e._v("，"),a("strong",[e._v("勾选时如有弹窗确定即可")]),e._v("；")]),e._v(" "),a("p",[a("img",{attrs:{src:s(779),alt:"image-20211002120904005"}})]),e._v(" "),a("p",[e._v("Fiddler listens on port：8888是监控端口；")]),e._v(" "),a("p",[a("img",{attrs:{src:s(780),alt:"image-20211002120849790"}})]),e._v(" "),a("h3",{attrs:{id:"手机设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#手机设置"}},[e._v("#")]),e._v(" 手机设置")]),e._v(" "),a("p",[e._v("1）手机和电脑连同一个WiFi；")]),e._v(" "),a("p",[e._v("2）通过ipconfig查看计算机IP地址，如本机IP地址为：192.168.31.132；打开手机无线网络，选择连接的WiFi，设置代理，IP输入192.168.31.132，端口：8888；")]),e._v(" "),a("p",[e._v("3）手机浏览器访问：192.168.31.132:8888，出现响应页面说明连接成功，点击响应界面中的“fiddlerRoot certificate”安装证书，然后就可以操作App通过Fiddler进行抓包了。")]),e._v(" "),a("p",[e._v("可以在Fiddler Statistics中查看各个请求发送和接受数据大小及传输时间。")]),e._v(" "),a("p",[a("img",{attrs:{src:s(781),alt:"image-20211002121113610"}})]),e._v(" "),a("h3",{attrs:{id:"fiddler模拟限速的原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fiddler模拟限速的原理"}},[e._v("#")]),e._v(" fiddler模拟限速的原理")]),e._v(" "),a("p",[e._v("我们可以通过fiddler来模拟限速，因为fiddler本来就是个代理，它提供了客户端请求前和服务器响应前的回调接口，我们可以在这些接口里 面自定义一些逻辑。Fiddler的模拟限速正是在客户端请求前来自定义限速的逻辑，此逻辑是通过延迟发送数据或接收的数据的时间来限制网络的下载速度和 上传速度，从而达到限速的效果。")]),e._v(" "),a("p",[e._v("提供了一个功能，让我们模拟低速网路环境…启用方法如下：")]),e._v(" "),a("p",[e._v("Rules → Performances → Simulate Modem Speeds ：模拟调制解调器的速度")]),e._v(" "),a("p",[e._v("启动fiddler需要进行如下设置：")]),e._v(" "),a("ul",[a("li",[e._v("设置端口号，重启Fiddler")]),e._v(" "),a("li",[e._v("设置模拟调制解调器的速度")]),e._v(" "),a("li",[e._v("设置手机代理")]),e._v(" "),a("li",[e._v("设置上下行速率")]),e._v(" "),a("li",[e._v("开始调试")])]),e._v(" "),a("p",[a("strong",[e._v("设置端口号")])]),e._v(" "),a("p",[a("code",[e._v("allow remote computers to connect")]),e._v(" “允许远程计算机连接”为设置的代理可以连接到fiddle上，必须勾选。重启fiddle！")]),e._v(" "),a("p",[a("strong",[e._v("设置模拟调制解调器的速度：")])]),e._v(" "),a("p",[a("img",{attrs:{src:s(782),alt:"image-20211002121148388"}})]),e._v(" "),a("p",[a("strong",[e._v("设置手机代理")])]),e._v(" "),a("p",[e._v("手机代理设置“ip地址为本机的ip，端口号为之前设置的端口号（确保端口号不被占用）”")]),e._v(" "),a("p",[a("strong",[e._v("手动设置设置上行，下行速率")])]),e._v(" "),a("p",[a("img",{attrs:{src:s(783),alt:"image-20211002121217763"}})]),e._v(" "),a("p",[e._v("手动设置设置上行，下行速率模拟网路速度的原理，每上传/下载1KB 要delay 多久…")]),e._v(" "),a("p",[e._v("网络取值的算法就是 1000/下载速度 = 需要delay的时间(毫秒)，比如50kb/s 需要delay200毫秒来接收数据。")]),e._v(" "),a("p",[e._v("查找代码如下：")]),e._v(" "),a("p",[a("img",{attrs:{src:s(784),alt:"image-20211002121254254"}})]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('if (m_SimulateModem) {\n   //Delay sends by 300ms per KB uploaded. //每延迟300ms发送1kb的数据，也就是每1s发送3kb的数据\t\n\t oSession["request-trickle-delay"] = 300\n\n   //Delay receives by 150ms per KB downloaded.\n   oSession["response-trickle-delay"] = 150//每延迟150ms下行1kb的数据\n}\n')])])]),a("blockquote",[a("p",[e._v("PS: 请注意，当你存档之后，原本已经勾选的SimulateModem Speeds 会被取消勾选，要记得再到Rules → Performances → Simulate Modem Speeds 勾选喔！")])]),e._v(" "),a("p",[a("strong",[e._v("开始调试")])]),e._v(" "),a("p",[e._v("清空原有的log，并使用你的app进行弱网条件下的操作，")]),e._v(" "),a("p",[e._v("选择第一个请求和最后一个请求，可获得整个页面加载所消耗的总体时间。从条形图表中还可以分别出哪些请求耗时最多，从而对页面的访问进行访问速度优化")]),e._v(" "),a("p",[e._v("不同请求耗时多少的图形表，获取那种资源耗时最大，进而进行优化。")])])}),[],!1,null,null,null);t.default=i.exports},775:function(e,t,s){e.exports=s.p+"assets/img/image-20211002121811552.777358a6.png"},776:function(e,t,s){e.exports=s.p+"assets/img/image-20211002121859494.ee7c01e1.png"},777:function(e,t,s){e.exports=s.p+"assets/img/image-20211002120732553.6c8efb6e.png"},778:function(e,t,s){e.exports=s.p+"assets/img/image-20211002120754604.9bced7a5.png"},779:function(e,t,s){e.exports=s.p+"assets/img/image-20211002120904005.e19754ba.png"},780:function(e,t,s){e.exports=s.p+"assets/img/image-20211002120849790.171d68b0.png"},781:function(e,t,s){e.exports=s.p+"assets/img/image-20211002121113610.df500a0d.png"},782:function(e,t,s){e.exports=s.p+"assets/img/image-20211002121148388.ca7558b5.png"},783:function(e,t,s){e.exports=s.p+"assets/img/image-20211002121217763.ff2a5398.png"},784:function(e,t,s){e.exports=s.p+"assets/img/image-20211002121254254.fb930374.png"}}]);