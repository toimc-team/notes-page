(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1043:function(t,s,_){"use strict";_.r(s);var v=_(11),a=Object(v.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"virtualbox虚拟机设置固定ip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#virtualbox虚拟机设置固定ip"}},[t._v("#")]),t._v(" VirtualBox虚拟机设置固定IP")]),t._v(" "),s("h2",{attrs:{id:"vb的多种网络接入模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vb的多种网络接入模式"}},[t._v("#")]),t._v(" VB的多种网络接入模式")]),t._v(" "),s("ul",[s("li",[t._v("NAT模式：最简单的实现虚拟机上网的方式，无需配置，默认选择即可接入网络。虚拟机访问网络的所有数据都是由主机提供的，虚拟机访问网络是先通过VirtualBox转换后再发送出去的，数据接收也是先由VirtualBox接收后再转换发送到虚拟机上的，访问速度较慢；虚机可以直接访问主机，主机不能直接访问虚拟机。")]),t._v(" "),s("li",[t._v("Bridged Adapter模式：即桥接模式，可以为虚拟机模拟出一个独立的网卡，有独立的IP地址，所有网络功能和主机一样，并且能够互相访问，实现文件的传递和共享。被桥接的网卡会开启混杂模式。")]),t._v(" "),s("li",[t._v("Internal模式：即内网模式，虚拟机与外网完全断开，只实现虚拟机于虚拟机之间的内部网络模式，和主机之间不能互相访问，就相当于虚拟机之间架设了一个独立的局域网。只有 同一名称（如：intnet）的内部网络模式的虚拟机之间才能互相访问 ，还有一个条件是在同一网段。")]),t._v(" "),s("li",[t._v("Host-only Adapter模式：即主机模式，VirtualBox 在宿主机中虚拟一个 host-only 网卡，然后把虚拟主机桥接到 host-only 网卡上，我们可以通过设置 host-only 网卡（共享、桥接）来实现网络连接，是所有接入模式中最复杂的一种，需要有比较扎实的网络基础知识才行。前面几种模式所实现的功能，通过虚拟机及网卡的设置都可以被实现。")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[s("strong",[t._v("Bridged Adapter模式")])]),t._v(" "),s("th",[s("strong",[t._v("NAT模式")])]),t._v(" "),s("th",[s("strong",[t._v("Internal模式")])]),t._v(" "),s("th",[s("strong",[t._v("Host-only Adapter模式")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("虚拟机与宿主机")])]),t._v(" "),s("td",[t._v("处于同一网段，彼此互通")]),t._v(" "),s("td",[t._v("虚拟机能访问宿主机；宿主机不能访问虚拟机")]),t._v(" "),s("td",[t._v("彼此不通")]),t._v(" "),s("td",[t._v("虚拟机能访问宿主机；宿主机不能访问虚拟机")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("虚拟机与虚拟机")])]),t._v(" "),s("td",[t._v("处于同一网段，彼此互通")]),t._v(" "),s("td",[t._v("彼此不通")]),t._v(" "),s("td",[t._v("彼此互通，处于同一网段")]),t._v(" "),s("td",[t._v("彼此互通，处于同一网段")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("虚拟机与其他主机")])]),t._v(" "),s("td",[t._v("处于同一网段，彼此互通")]),t._v(" "),s("td",[t._v("虚拟机能访问其他主机；其他主机不能访问虚拟机")]),t._v(" "),s("td",[t._v("彼此不通")]),t._v(" "),s("td",[t._v("彼此不通；需要设置")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("虚拟机与互联网")])]),t._v(" "),s("td",[t._v("虚拟机可以上网")]),t._v(" "),s("td",[t._v("虚拟机可以上网")]),t._v(" "),s("td",[t._v("虚拟机不能上网")]),t._v(" "),s("td",[t._v("彼此不通；需要设置")])])])]),t._v(" "),s("h2",{attrs:{id:"使用需求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用需求"}},[t._v("#")]),t._v(" 使用需求")]),t._v(" "),s("ul",[s("li",[t._v("虚拟机能访问网络；")]),t._v(" "),s("li",[t._v("虚拟机的ip需要固定；")]),t._v(" "),s("li",[t._v("虚拟机之间能互相访问，集群/主从架构节点需要互相通信")])]),t._v(" "),s("h2",{attrs:{id:"网络连接方式选择"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络连接方式选择"}},[t._v("#")]),t._v(" 网络连接方式选择")]),t._v(" "),s("p",[t._v("可以访问网络的连接方式：")]),t._v(" "),s("ul",[s("li",[t._v("nat(网络地址转换)——NAT不支持静态IP、虚拟机之间不能互相访问")]),t._v(" "),s("li",[t._v("桥接——桥接的话会占用局域网的ip，小团队设备少，可以避开，但是拿到办公环境就容易和其他机器的ip冲突")])]),t._v(" "),s("h2",{attrs:{id:"多块网卡-nat-host-only"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#多块网卡-nat-host-only"}},[t._v("#")]),t._v(" 多块网卡 NAT + Host Only")]),t._v(" "),s("p",[t._v("直接用桥接模式，到时能满足需求，但是也不大好； 但是这是用的虚拟机，有多个网卡")]),t._v(" "),s("p",[s("img",{attrs:{src:_(388),alt:"img"}})]),t._v(" "),s("p",[t._v("可以通过多个网卡，设置不同的网络连接方式，达到目标；")]),t._v(" "),s("ul",[s("li",[t._v("第一个网卡选择 NAT 模式使得虚拟机能访问网络")]),t._v(" "),s("li",[t._v("第二个网卡选择 Host Only 使多个虚拟机之间能互相通信并且还能设置静态ip")])]),t._v(" "),s("h3",{attrs:{id:"_1-第一块网卡设置nat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-第一块网卡设置nat"}},[t._v("#")]),t._v(" 1. 第一块网卡设置NAT")]),t._v(" "),s("p",[t._v("首先 VirtualBox 使用 NAT 模式，需要先开始一个全局设置 （管理 -> 全局设置）")]),t._v(" "),s("p",[s("img",{attrs:{src:_(389),alt:"img"}})]),t._v(" "),s("p",[s("img",{attrs:{src:_(390),alt:"img"}})]),t._v(" "),s("p",[t._v("然后网络连接设置为 NAT")]),t._v(" "),s("p",[s("img",{attrs:{src:_(391),alt:"img"}})]),t._v(" "),s("p",[t._v("ping 一下网络试试")]),t._v(" "),s("p",[s("img",{attrs:{src:_(392),alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"_2-第二块网卡设置-host-only"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-第二块网卡设置-host-only"}},[t._v("#")]),t._v(" 2. 第二块网卡设置 Host Only")]),t._v(" "),s("p",[s("img",{attrs:{src:_(393),alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"设置静态ip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置静态ip"}},[t._v("#")]),t._v(" 设置静态IP")]),t._v(" "),s("p",[t._v("进入网卡配置目录 "),s("code",[t._v("cd /etc/sysconfig/network-scripts")])]),t._v(" "),s("p",[t._v("找 "),s("strong",[t._v("ifcfg-")]),t._v(" 开头的文件, 由于现在有多个网卡，ifcfg的文件有多个")]),t._v(" "),s("p",[s("img",{attrs:{src:_(394),alt:"img"}})]),t._v(" "),s("p",[t._v("那么编辑哪个呢？网卡有唯一的 mac 地址，看看第二块host only 的网卡mac地址为")]),t._v(" "),s("p",[s("img",{attrs:{src:_(395),alt:"img"}})]),t._v(" "),s("p",[t._v("看看虚拟机网络 "),s("code",[t._v("ip addr")])]),t._v(" "),s("p",[s("img",{attrs:{src:_(396),alt:"img"}})]),t._v(" "),s("p",[t._v("可以看到，第二块网卡mac地址对应的设备为 "),s("strong",[t._v("enp0s8")])]),t._v(" "),s("p",[t._v("那么编辑的文件应该是 ifcfg-enp0s8")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("BOOTPROTO=static  ## 改为static静态ip\n\nIPADDR=192.168.56.104 ##设置静态ip\n\nNETMASK=255.255.255.0 ## 设置子网掩码\n")])])]),s("p",[t._v("注意：IPADDR 和 NETMASK 要和宿主机的网络设置匹配；我自己的笔记本 ip是 192.168.56.1 所以上面虚拟机的ip地址只能设置成 192.168.56.x 这个ip段")]),t._v(" "),s("p",[s("img",{attrs:{src:_(397),alt:"img"}})]),t._v(" "),s("p",[t._v("从笔记本（宿主）ping一下虚拟机试试")]),t._v(" "),s("p",[s("img",{attrs:{src:_(398),alt:"img"}})]),t._v(" "),s("p",[t._v("成功！ 其他台虚拟机可以用一样的方式去设置，或者再配置完整个虚拟机环境(网络、基本的java环境、zookeeper节点)后，直接利用virtual box复制后改改ip 更省事")])])}),[],!1,null,null,null);s.default=a.exports},388:function(t,s,_){t.exports=_.p+"assets/img/20210725164922992U_0.3860f261.png"},389:function(t,s,_){t.exports=_.p+"assets/img/20210725164922992U_1.9b9f4b63.png"},390:function(t,s,_){t.exports=_.p+"assets/img/20210725164922992U_2.4ded7317.png"},391:function(t,s,_){t.exports=_.p+"assets/img/20210725164922992U_3.8cbc6be6.png"},392:function(t,s,_){t.exports=_.p+"assets/img/20210725164922992U_4.png.245003d4.jpg"},393:function(t,s,_){t.exports=_.p+"assets/img/20210725164922992U_5.0d57e16e.png"},394:function(t,s,_){t.exports=_.p+"assets/img/20210725164922992U_6.1fba1246.png"},395:function(t,s,_){t.exports=_.p+"assets/img/20210725164922992U_7.93ab497c.png"},396:function(t,s,_){t.exports=_.p+"assets/img/20210725164922992U_8.png.14158c77.jpg"},397:function(t,s,_){t.exports=_.p+"assets/img/20210725164922992U_9.71763b58.png"},398:function(t,s,_){t.exports=_.p+"assets/img/20210725164922992U_10.6c8c7d40.png"}}]);