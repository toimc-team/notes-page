<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>首页模块 | 大前端 - 前端高级进阶</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="大前端课程电子书">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/notes-page/assets/css/0.styles.9d7a94b6.css" as="style"><link rel="preload" href="/notes-page/assets/js/app.6542a1dc.js" as="script"><link rel="preload" href="/notes-page/assets/js/4.9166b5fb.js" as="script"><link rel="preload" href="/notes-page/assets/js/5.e265b4d0.js" as="script"><link rel="preload" href="/notes-page/assets/js/11.16946e8f.js" as="script"><link rel="prefetch" href="/notes-page/assets/js/10.20744efe.js"><link rel="prefetch" href="/notes-page/assets/js/12.04a72c4c.js"><link rel="prefetch" href="/notes-page/assets/js/13.82cfed4d.js"><link rel="prefetch" href="/notes-page/assets/js/14.9dd22d4e.js"><link rel="prefetch" href="/notes-page/assets/js/15.36695de4.js"><link rel="prefetch" href="/notes-page/assets/js/16.2d1986e9.js"><link rel="prefetch" href="/notes-page/assets/js/17.6c0c74e9.js"><link rel="prefetch" href="/notes-page/assets/js/18.4efaf1c9.js"><link rel="prefetch" href="/notes-page/assets/js/19.4bf0d562.js"><link rel="prefetch" href="/notes-page/assets/js/2.faeddd7c.js"><link rel="prefetch" href="/notes-page/assets/js/20.bca89758.js"><link rel="prefetch" href="/notes-page/assets/js/21.985beb03.js"><link rel="prefetch" href="/notes-page/assets/js/22.3a10ed01.js"><link rel="prefetch" href="/notes-page/assets/js/23.c9a0b5ee.js"><link rel="prefetch" href="/notes-page/assets/js/24.25aa7be0.js"><link rel="prefetch" href="/notes-page/assets/js/25.19767b77.js"><link rel="prefetch" href="/notes-page/assets/js/26.8a97778c.js"><link rel="prefetch" href="/notes-page/assets/js/27.342e8d9b.js"><link rel="prefetch" href="/notes-page/assets/js/28.34ec27ba.js"><link rel="prefetch" href="/notes-page/assets/js/29.171759a1.js"><link rel="prefetch" href="/notes-page/assets/js/3.b42e669b.js"><link rel="prefetch" href="/notes-page/assets/js/30.7b6ca97f.js"><link rel="prefetch" href="/notes-page/assets/js/31.39e4ae05.js"><link rel="prefetch" href="/notes-page/assets/js/32.155b994b.js"><link rel="prefetch" href="/notes-page/assets/js/33.bbe52813.js"><link rel="prefetch" href="/notes-page/assets/js/34.4ff624f0.js"><link rel="prefetch" href="/notes-page/assets/js/35.5552c06b.js"><link rel="prefetch" href="/notes-page/assets/js/36.bdd787f8.js"><link rel="prefetch" href="/notes-page/assets/js/37.457a18a8.js"><link rel="prefetch" href="/notes-page/assets/js/38.246f26f0.js"><link rel="prefetch" href="/notes-page/assets/js/39.18dc7d1d.js"><link rel="prefetch" href="/notes-page/assets/js/40.a03370de.js"><link rel="prefetch" href="/notes-page/assets/js/41.ecb82051.js"><link rel="prefetch" href="/notes-page/assets/js/42.ca0f4bd8.js"><link rel="prefetch" href="/notes-page/assets/js/43.3e75f996.js"><link rel="prefetch" href="/notes-page/assets/js/44.e28def85.js"><link rel="prefetch" href="/notes-page/assets/js/45.a20867d9.js"><link rel="prefetch" href="/notes-page/assets/js/46.d457e177.js"><link rel="prefetch" href="/notes-page/assets/js/47.31ee9624.js"><link rel="prefetch" href="/notes-page/assets/js/48.0496e5c8.js"><link rel="prefetch" href="/notes-page/assets/js/49.99d9cc93.js"><link rel="prefetch" href="/notes-page/assets/js/50.3bdf52f4.js"><link rel="prefetch" href="/notes-page/assets/js/51.556a917f.js"><link rel="prefetch" href="/notes-page/assets/js/52.5de01f99.js"><link rel="prefetch" href="/notes-page/assets/js/53.5402efe6.js"><link rel="prefetch" href="/notes-page/assets/js/54.08ce8c78.js"><link rel="prefetch" href="/notes-page/assets/js/55.22178926.js"><link rel="prefetch" href="/notes-page/assets/js/56.0a5810ea.js"><link rel="prefetch" href="/notes-page/assets/js/57.99a393f3.js"><link rel="prefetch" href="/notes-page/assets/js/58.a2358583.js"><link rel="prefetch" href="/notes-page/assets/js/59.804ef74a.js"><link rel="prefetch" href="/notes-page/assets/js/6.d87de747.js"><link rel="prefetch" href="/notes-page/assets/js/60.55299036.js"><link rel="prefetch" href="/notes-page/assets/js/61.bf6aee5b.js"><link rel="prefetch" href="/notes-page/assets/js/62.d5fe0864.js"><link rel="prefetch" href="/notes-page/assets/js/63.4eac1b92.js"><link rel="prefetch" href="/notes-page/assets/js/64.a437dd2d.js"><link rel="prefetch" href="/notes-page/assets/js/65.b1e55154.js"><link rel="prefetch" href="/notes-page/assets/js/66.90a3d007.js"><link rel="prefetch" href="/notes-page/assets/js/67.3f90464a.js"><link rel="prefetch" href="/notes-page/assets/js/68.ef1349b2.js"><link rel="prefetch" href="/notes-page/assets/js/69.40998bcf.js"><link rel="prefetch" href="/notes-page/assets/js/7.6a6e8f49.js"><link rel="prefetch" href="/notes-page/assets/js/70.9d84a281.js"><link rel="prefetch" href="/notes-page/assets/js/71.111b46b1.js"><link rel="prefetch" href="/notes-page/assets/js/72.5615311e.js"><link rel="prefetch" href="/notes-page/assets/js/73.372281a7.js"><link rel="prefetch" href="/notes-page/assets/js/74.2fcc982a.js"><link rel="prefetch" href="/notes-page/assets/js/75.34f6a318.js"><link rel="prefetch" href="/notes-page/assets/js/76.369d0d33.js"><link rel="prefetch" href="/notes-page/assets/js/8.2b1695cc.js"><link rel="prefetch" href="/notes-page/assets/js/9.571eaf20.js">
    <link rel="stylesheet" href="/notes-page/assets/css/0.styles.9d7a94b6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes-page/" class="home-link router-link-active"><!----> <span class="site-name">大前端 - 前端高级进阶</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>社区PC</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes-page/project/community-pc/" class="sidebar-link">PC</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>社区管理后台</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes-page/project/community-admin/" class="sidebar-link">管理后台</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>社区WebApp</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes-page/project/community-webapp/" class="sidebar-link">webapp</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>小程序</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes-page/project/community-miniapp/" aria-current="page" class="sidebar-link">uniapp介绍</a></li><li><a href="/notes-page/project/community-miniapp/1-搭建开发环境.html" class="sidebar-link">搭建开发环境</a></li><li><a href="/notes-page/project/community-miniapp/2-首页模块.html" class="active sidebar-link">首页模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#首页tabbar" class="sidebar-link">首页tabBar</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#代码依赖分析" class="sidebar-link">代码依赖分析</a></li><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#导入静态资源" class="sidebar-link">导入静态资源</a></li><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#布局与样式" class="sidebar-link">布局与样式</a></li><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#导入uview-ui" class="sidebar-link">导入uView UI</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#搜索" class="sidebar-link">搜索</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#添加分包" class="sidebar-link">添加分包</a></li><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#布局与样式-2" class="sidebar-link">布局与样式</a></li><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#添加事件" class="sidebar-link">添加事件</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#首页tabs" class="sidebar-link">首页Tabs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#布局与样式-3" class="sidebar-link">布局与样式</a></li><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#添加事件-2" class="sidebar-link">添加事件</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#内容列表" class="sidebar-link">内容列表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#布局与样式-4" class="sidebar-link">布局与样式</a></li><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#获取数据" class="sidebar-link">获取数据</a></li><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#分页与切换" class="sidebar-link">分页与切换</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#发帖入口" class="sidebar-link">发帖入口</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#布局与样式-5" class="sidebar-link">布局与样式</a></li><li class="sidebar-sub-header"><a href="/notes-page/project/community-miniapp/2-首页模块.html#添加事件-3" class="sidebar-link">添加事件</a></li></ul></li></ul></li><li><a href="/notes-page/project/community-miniapp/2.1-发贴功能.html" class="sidebar-link">发贴功能</a></li><li><a href="/notes-page/project/community-miniapp/2.2-文章详情.html" class="sidebar-link">文章详情</a></li><li><a href="/notes-page/project/community-miniapp/3-消息模块.html" class="sidebar-link">消息模块</a></li><li><a href="/notes-page/project/community-miniapp/4-热门模块.html" class="sidebar-link">热门模块</a></li><li><a href="/notes-page/project/community-miniapp/5-个人中心.html" class="sidebar-link">个人中心</a></li><li><a href="/notes-page/project/community-miniapp/6-发布上线.html" class="sidebar-link">发布上线</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Flutter 2.0</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes-page/project/community-flutter/" class="sidebar-link">flutter</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Electron桌面端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes-page/project/community-electron/" class="sidebar-link">electron</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React世界</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes-page/project/react/" class="sidebar-link">React项目</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="首页模块"><a href="#首页模块" class="header-anchor">#</a> 首页模块</h1> <h2 id="首页tabbar"><a href="#首页tabbar" class="header-anchor">#</a> 首页tabBar</h2> <h3 id="代码依赖分析"><a href="#代码依赖分析" class="header-anchor">#</a> 代码依赖分析</h3> <p>可以在基本信息中选择代码依赖分析</p> <img src="/notes-page/assets/img/image-20210428193747590.a3e78cc2.png" width="400"> <p>查看本地代码与分包大小：</p> <img src="/notes-page/assets/img/image-20210428193958813.de26ed19.png" width="800"> <h3 id="导入静态资源"><a href="#导入静态资源" class="header-anchor">#</a> 导入静态资源</h3> <ul><li>删除原<code>static</code>目录中的文件；</li> <li>下载课程的静态资源文件夹，并放置于<code>static</code>的<code>images</code>目录中。</li></ul> <h3 id="布局与样式"><a href="#布局与样式" class="header-anchor">#</a> 布局与样式</h3> <p>完成效果：</p> <img src="/notes-page/assets/img/image-20210428194953556.b102bed2.png" width="300"> <p>创建tabBar的步骤：</p> <ul><li>创建tabBar对应的页面；</li> <li>修改pages.json中的配置项：<code>pages</code>和<code>tabBar</code></li></ul> <p>创建页面HBuilderx方式：</p> <img src="/notes-page/assets/img/image-20210419173303417.abf903c9.png" width="600"> <p>创建页面的VSCode插件方式：</p> <p><img src="/notes-page/assets/img/image-20210428194346415.a9dc6d4b.png" alt="image-20210428194346415"></p> <p>快速创建4个页面</p> <p><img src="/notes-page/assets/img/image-20210428194614781.39a556bc.png" alt="image-20210428194614781"></p> <p>并调整<code>pages.json</code>：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/home/home&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/msg/msg&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/hot/hot&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/center/center&quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;globalStyle&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;navigationBarTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;uni-app&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;navigationBarBackgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#F8F8F8&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#F8F8F8&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;app-plus&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;background&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#efeff4&quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>新建tabBar属性：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;tabBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token property">&quot;color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#999&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#fafafa&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;selectedColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#02D199&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;borderStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;首页&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/home/home&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/images/tab_home_no.png&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/images/tab_home_yes.png&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;消息&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/msg/msg&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/images/tab_news_no.png&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/images/tab_news_yes.png&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;热门&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/hot/hot&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/images/tab_popular_no.png&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/images/tab_popular_yes.png&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我的&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/center/center&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/images/tab_my_no.png&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/images/tab_my_yes.png&quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bottom&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>底部的阴影：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom-line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.bottom-line</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> -5px<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100vw<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 -5px 5px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.05<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="导入uview-ui"><a href="#导入uview-ui" class="header-anchor">#</a> 导入uView UI</h3> <p>准备工作</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 安装sass依赖</span>
npm i node<span class="token operator">-</span>sass sass<span class="token operator">-</span>loader@<span class="token number">10</span> <span class="token operator">-</span><span class="token constant">D</span>

<span class="token comment">// 安装uView</span>
npm install uview<span class="token operator">-</span>ui
</code></pre></div><p>在<code>main.js</code>中引入：</p> <div class="language- extra-class"><pre class="language-text"><code>import uView from 'uview-ui'
Vue.use(uView)
</code></pre></div><p>在项目根目录的<code>uni.scss</code>中引入样式文件：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* uni.scss */</span>
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'uview-ui/theme.scss'</span><span class="token punctuation">;</span></span>
</code></pre></div><p>调整<code>App.vue</code>的样式</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token comment">/* 注意要写在第一行，同时给style标签加入lang=&quot;scss&quot;属性 */</span>
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">&quot;uview-ui/index.scss&quot;</span><span class="token punctuation">;</span></span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>配置<code>pages.json</code>：</p> <div class="language-json extra-class"><pre class="language-json"><code>	<span class="token comment">// ....</span>
	<span class="token property">&quot;easycom&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;^u-(.*)&quot;</span><span class="token operator">:</span> <span class="token string">&quot;uview-ui/components/u-$1/u-$1.vue&quot;</span>
	<span class="token punctuation">}</span>
</code></pre></div><h2 id="搜索"><a href="#搜索" class="header-anchor">#</a> 搜索</h2> <h3 id="添加分包"><a href="#添加分包" class="header-anchor">#</a> 添加分包</h3> <p>在uniapp中添加分包</p> <ul><li>新增页面，比如<code>/sub-pkg/search/search</code></li> <li>配置<code>pages.json</code></li></ul> <h3 id="布局与样式-2"><a href="#布局与样式-2" class="header-anchor">#</a> 布局与样式</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-search</span> <span class="token attr-name">:focus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-search</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 搜索建议列表 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchResults.length !== 0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, i) in searchResults<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-icon</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>arrow-right<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>16<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-icon</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 搜索历史 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>history-box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 标题区域 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>history-title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>historyList.length !== 0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>搜索历史<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-icon</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>trash<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>17<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-icon</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 列表区域 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>history-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-tag</span> <span class="token attr-name">:text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, i) in historyList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uni-tag</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 热门推荐 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>history-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 标题区域 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>history-title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hotList.length !== 0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>热门推荐<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 列表区域 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>history-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-tag</span> <span class="token attr-name">:text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, i) in hotList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uni-tag</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.search</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 24rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 999<span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 50rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.list</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 5px<span class="token selector">;
  .item</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 13px 0<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #efefef<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token selector">;
    .name</span> <span class="token punctuation">{</span>
      <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
      <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.history-box</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 10rpx 50rpx<span class="token selector">;

  .history-title</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.history-list</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token selector">;
    ::v-deep .uni-tag</span> <span class="token punctuation">{</span>
      <span class="token property">margin-top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 25rpx<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>pages.json</code>中配置分包：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;subPackages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token property">&quot;root&quot;</span><span class="token operator">:</span> <span class="token string">&quot;subpkg&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;search/search&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;搜索&quot;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>使用easycom，添加<code>search.vue</code>组件：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{<span class="token punctuation">'</span>padding-top<span class="token punctuation">'</span>: barHeight + <span class="token punctuation">'</span>px<span class="token punctuation">'</span>}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$emit(<span class="token punctuation">'</span>click<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#CCCCCC<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>28<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-icon</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>搜索社区内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    barHeight<span class="token operator">:</span> <span class="token number">80</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">getNavBarHeight</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      uni<span class="token punctuation">.</span><span class="token function">getSystemInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> statusBarHeight <span class="token operator">=</span> result<span class="token punctuation">.</span>statusBarHeight
          <span class="token keyword">const</span> isiOS <span class="token operator">=</span> result<span class="token punctuation">.</span>system<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'iOS'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>isiOS<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>barHeight <span class="token operator">=</span> statusBarHeight <span class="token operator">+</span> <span class="token number">5</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>barHeight <span class="token operator">=</span> statusBarHeight <span class="token operator">+</span> <span class="token number">7</span>
          <span class="token punctuation">}</span>
          <span class="token comment">// getApp().globalData.barHeight = this.barHeight</span>
          <span class="token comment">// 存储至store中</span>
          <span class="token comment">// uni.setStorage({</span>
          <span class="token comment">//   key: 'setBarHeight',</span>
          <span class="token comment">//   data: this.barHeight</span>
          <span class="token comment">// })</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeMount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getNavBarHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">// search
.search</span> <span class="token punctuation">{</span>
  // <span class="token property">padding-top</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100vw<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 32rpx 12rpx<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 999<span class="token selector">;
  .search-box</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 70%<span class="token punctuation">;</span>
    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 320px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 60%<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 64rpx<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 64rpx<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #f3f3f3<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 32rpx<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 26rpx<span class="token punctuation">;</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 74rpx<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.icon</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 32rpx<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 19rpx<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>home.vue</code>添加导航：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>search</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gotoSearch<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>search</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>完成效果：</p> <p><img src="data:image/png;base64,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" alt="image-20210523231442459"></p> <h3 id="添加事件"><a href="#添加事件" class="header-anchor">#</a> 添加事件</h3> <p><code>home.vue</code>添加<code>gotoSearch</code>方法，完成页面跳转。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">gotoSearch</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">'/subcom-pkg/search/search'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>完成效果：</p> <p>![iShot2021-05-23 23.36.17](./assets/iShot2021-05-23 23.36.17.gif)</p> <h2 id="首页tabs"><a href="#首页tabs" class="header-anchor">#</a> 首页Tabs</h2> <h3 id="布局与样式-3"><a href="#布局与样式-3" class="header-anchor">#</a> 布局与样式</h3> <p><code>home.vue</code>添加tabs</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-tabs</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uTabs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:is-scroll</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">active-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#02D199<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>88<span class="token punctuation">&quot;</span></span> <span class="token attr-name">gutter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-tabs</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>添加tabs数据</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-tabs</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uTabs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>value<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">:current</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>current<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:is-scroll</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">active-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#02D199<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>88<span class="token punctuation">&quot;</span></span> <span class="token attr-name">gutter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-tabs</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    tabs<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        key<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        value<span class="token operator">:</span> <span class="token string">'首页'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        key<span class="token operator">:</span> <span class="token string">'ask'</span><span class="token punctuation">,</span>
        value<span class="token operator">:</span> <span class="token string">'提问'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        key<span class="token operator">:</span> <span class="token string">'share'</span><span class="token punctuation">,</span>
        value<span class="token operator">:</span> <span class="token string">'分享'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        key<span class="token operator">:</span> <span class="token string">'discuss'</span><span class="token punctuation">,</span>
        value<span class="token operator">:</span> <span class="token string">'讨论'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        key<span class="token operator">:</span> <span class="token string">'advise'</span><span class="token punctuation">,</span>
        value<span class="token operator">:</span> <span class="token string">'建议'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        key<span class="token operator">:</span> <span class="token string">'advise'</span><span class="token punctuation">,</span>
        value<span class="token operator">:</span> <span class="token string">'公告'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        key<span class="token operator">:</span> <span class="token string">'advise'</span><span class="token punctuation">,</span>
        value<span class="token operator">:</span> <span class="token string">'动态'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 因为内部的滑动机制限制，请将tabs组件和swiper组件的current用不同变量赋值</span>
    current<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// tabs组件的current值，表示当前活动的tab选项</span>
    swiperCurrent<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// swiper组件的current值，表示当前那个swiper-item是活动的</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>完成效果</p> <p><img src="/notes-page/assets/img/image-20210526225831609.c1003bc6.png" alt="image-20210526225831609"></p> <h3 id="添加事件-2"><a href="#添加事件-2" class="header-anchor">#</a> 添加事件</h3> <p>tabs添加切换事件<code>tabsChange</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-tabs</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uTabs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>value<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">:current</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>current<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabsChange<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:is-scroll</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">active-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#02D199<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>88<span class="token punctuation">&quot;</span></span> <span class="token attr-name">gutter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-tabs</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// tabs通知swiper切换</span>
      <span class="token function">tabsChange</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">=</span> index
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="内容列表"><a href="#内容列表" class="header-anchor">#</a> 内容列表</h2> <h3 id="布局与样式-4"><a href="#布局与样式-4" class="header-anchor">#</a> 布局与样式</h3> <p>添加<code>list-item</code>组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-head<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>type-<span class="token punctuation">'</span>+item.catalog]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.catalog === <span class="token punctuation">'</span>share<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>分享<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>type-<span class="token punctuation">'</span>+item.catalog]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.catalog === <span class="token punctuation">'</span>ask<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提问<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>type-<span class="token punctuation">'</span>+item.catalog]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.catalog === <span class="token punctuation">'</span>discuss<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>讨论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>type-<span class="token punctuation">'</span>+item.catalog]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.catalog === <span class="token punctuation">'</span>advise<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>建议<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
          {{item.title}}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inline-block flex-left-center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>head<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.uid.pic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>40<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>40<span class="token punctuation">&quot;</span></span> <span class="token attr-name">shape</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>circle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">error-icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/static/images/header.jpg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-image</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.uid.name || '未知用户'}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vip<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.uid.isVip !== <span class="token punctuation">'</span>0<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>VIP{{item.uid.isVip}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.content}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fmt<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.snapshot<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.snapshot<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply-num<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.answer}} 回复<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>timer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.created | moment}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    item<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>home.vue</code>添加内容展示区</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{<span class="token punctuation">'</span>padding-top<span class="token punctuation">'</span>: offsetTop + <span class="token punctuation">'</span>px<span class="token punctuation">'</span>}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item,index) in finalList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gotoDetail(item)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list-item</span> <span class="token attr-name">:item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    offsetTop<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
    lists<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    page<span class="token operator">:</span> <span class="token punctuation">{</span>
      page<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      limit<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      catagory<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      sort<span class="token operator">:</span> <span class="token string">'created'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    loading<span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>添加内容区域样式</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">// content lists
.content</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #f5f6f7<span class="token selector">;
  .wrapper</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 24rpx 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">// .nomore</span> <span class="token punctuation">{</span>
  //   <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  //   <span class="token property">padding</span><span class="token punctuation">:</span> 15px 0 25px 0<span class="token punctuation">;</span>
  //   <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
  //   <span class="token property">font-size</span><span class="token punctuation">:</span> 24rpx<span class="token punctuation">;</span>
  // <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.list-box</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.list-head</span> <span class="token punctuation">{</span>
  <span class="token comment">/*  display: flex;
  align-items: center; */</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 18rpx<span class="token selector">;
  .type</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 36rpx<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 72rpx<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 36rpx<span class="token punctuation">;</span>
    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 24rpx<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 18rpx<span class="token punctuation">;</span>
    <span class="token property">border-bottom-left-radius</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.type-share</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #feb21e<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.type-ask</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #02d199<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.type-discuss</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fe1e1e<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.type-advise</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #0166f8<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.title</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 32rpx<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 44rpx<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token selector">;
    .ellipsis</span> <span class="token punctuation">{</span>
      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
      <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>
      <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
      <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.type</span> <span class="token punctuation">{</span>
      <span class="token property">min-width</span><span class="token punctuation">:</span> 40rpx<span class="token punctuation">;</span>
      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.9<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> -4rpx<span class="token punctuation">;</span>
      <span class="token property">align-self</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.author</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 24rpx<span class="token punctuation">;</span>
  <span class="token property">margin-right</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 18rpx<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token selector">;
  .head</span> <span class="token punctuation">{</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.list-body</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token selector">;
  .info</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 28rpx<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
    <span class="token property">max-height</span><span class="token punctuation">:</span> 94rpx<span class="token punctuation">;</span>
    <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>
    <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
    <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.fmt</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 192rpx<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 122rpx<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 8rpx<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.list-footer</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 24rpx<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token selector">;
  .left</span> <span class="token punctuation">{</span>
    <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token selector">;
    .svg-icon</span> <span class="token punctuation">{</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 5rpx<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.timer</span> <span class="token punctuation">{</span>
      <span class="token property">margin-left</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>监听页面加载，处理内容列表容器的padding</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> query <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">createSelectorQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  query<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.fixed-top'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boundingClientRect</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>offsetTop <span class="token operator">=</span> data<span class="token punctuation">.</span>height
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// const { windowHeight } = uni.getSystemInfoSync()</span>
  <span class="token comment">// const query = uni.createSelectorQuery().in(this)</span>
  <span class="token comment">// query.select('#tabs').boundingClientRect(data =&gt; {</span>
  <span class="token comment">// }).exec()</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="获取数据"><a href="#获取数据" class="header-anchor">#</a> 获取数据</h3> <p>在通过后台接口获取数据前，我们需要对request和api进行简单的封装。</p> <p>创建<code>common</code>文件夹，新建 request.js</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// console.log(process.env)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  baseUrl<span class="token operator">:</span> <span class="token string">'https://mp.toimc.com'</span><span class="token punctuation">,</span> <span class="token comment">// 请求的本域名</span>
  <span class="token comment">// 设置为json，返回后会对数据进行一次JSON.parse()</span>
  dataType<span class="token operator">:</span> <span class="token string">'json'</span><span class="token punctuation">,</span>
  showLoading<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否显示请求中的loading</span>
  loadingText<span class="token operator">:</span> <span class="token string">'请求中...'</span><span class="token punctuation">,</span> <span class="token comment">// 请求loading中的文字提示</span>
  loadingTime<span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token comment">// 在此时间内，请求还没回来的话，就显示加载中动画，单位ms</span>
  originalData<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否在拦截器中返回服务端的原始数据</span>
  loadingMask<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 展示loading的时候，是否给一个透明的蒙层，防止触摸穿透</span>
  <span class="token comment">// 配置请求头信息</span>
  header<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'content-type'</span><span class="token operator">:</span> <span class="token string">'application/json;charset=UTF-8'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$u<span class="token punctuation">.</span>http
  http<span class="token punctuation">.</span><span class="token function">setConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>

  http<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span><span class="token function-variable function">request</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'🚀 ~ file: request.js ~ line 24 ~ install ~ config'</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span>

    <span class="token comment">// 可以对某个url进行特别处理，此url参数为this.$u.get(url)中的url值</span>
    <span class="token comment">// 最后需要将config进行return</span>
    <span class="token keyword">return</span> config
    <span class="token comment">// 如果return一个false值，则会取消本次请求</span>
    <span class="token comment">// if(config.url == '/user/rest') return false; // 取消某次请求</span>
  <span class="token punctuation">}</span>

  http<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span><span class="token function-variable function">response</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'🚀 ~ file: request.js ~ line 46 ~ install ~ data'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
    <span class="token keyword">return</span> data
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  install
<span class="token punctuation">}</span>
</code></pre></div><p>创建<code>api</code>文件夹，新建 index.js，按模块进行接口划分</p> <p><img src="/notes-page/assets/img/image-20210526235920712.8bf13693.png" alt="image-20210526235920712"></p> <p>index.js</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> req <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'./modules'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
<span class="token comment">// console.log('🚀 ~ file: index.js ~ line 2 ~ req', req)</span>

<span class="token keyword">const</span> <span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$u<span class="token punctuation">.</span>http
  req<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token function">req</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span>
    keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      http<span class="token punctuation">.</span>api <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>http<span class="token punctuation">.</span>api<span class="token punctuation">,</span>
        <span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">:</span> module<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  install
<span class="token punctuation">}</span>
</code></pre></div><p>public.js</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> HttpRequest <span class="token operator">=</span> <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$u

<span class="token comment">// ---------------------------------------首页----------------------------------------- //</span>
<span class="token comment">// 获取首页列表数据</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getContentList</span> <span class="token operator">=</span> <span class="token parameter">params</span> <span class="token operator">=&gt;</span> HttpRequest<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/public/list'</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span>
</code></pre></div><p>在<code>main.js</code>中引入</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> apis <span class="token keyword">from</span> <span class="token string">'@/api/index'</span>
<span class="token keyword">import</span> interceptors <span class="token keyword">from</span> <span class="token string">'@/common/request'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>interceptors<span class="token punctuation">)</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>apis<span class="token punctuation">)</span>
</code></pre></div><p>下面我们来获取首页列表数据，创建<code>getList</code>方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token function">getList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$u<span class="token punctuation">.</span>http<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getContentList</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>lists <span class="token operator">=</span> data
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过计算属对列表数据中的头像进行处理</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>computed<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">finalList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lists<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>item<span class="token punctuation">.</span>pic<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>uid <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>uid<span class="token punctuation">.</span>pic<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 网络图片 -&gt; https，服务器的图片 -&gt; /img/</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>item<span class="token punctuation">.</span>uid<span class="token punctuation">.</span>pic<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            item<span class="token punctuation">.</span>pic <span class="token operator">=</span> config<span class="token punctuation">.</span>baseUrl <span class="token operator">+</span> item<span class="token punctuation">.</span>uid<span class="token punctuation">.</span>pic
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 这是一张网络图片</span>
            item<span class="token punctuation">.</span>pic <span class="token operator">=</span> item<span class="token punctuation">.</span>uid<span class="token punctuation">.</span>pic
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// 默认如果未设置pic</span>
          item<span class="token punctuation">.</span>pic <span class="token operator">=</span> <span class="token string">'/static/images/header.jpg'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> item
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>最后在<code>onshow</code>周期请求数据</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">onShow</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>完成效果：</p> <p><img src="/notes-page/assets/img/image-20210527003502507.3b9a3d15.png" alt="image-20210527003502507"></p> <h3 id="分页与切换"><a href="#分页与切换" class="header-anchor">#</a> 分页与切换</h3> <p>上拉分页加载列表数据</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 页面处理函数--监听用户上拉触底</span>
<span class="token keyword">async</span> <span class="token function">onReachBottom</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>loading<span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token punctuation">.</span>page<span class="token operator">++</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$u<span class="token punctuation">.</span>http<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getContentList</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>lists <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>lists<span class="token punctuation">,</span> <span class="token operator">...</span>data<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>同时在tab切换时加载不同分类的数据，在tabs切换方法<code>tabsChange</code>中添加 getList 方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">tabsChange</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">=</span> index
  <span class="token keyword">this</span><span class="token punctuation">.</span>page <span class="token operator">=</span> <span class="token punctuation">{</span>
    page<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    limit<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    catalog<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tabs<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
    sort<span class="token operator">:</span> <span class="token string">'created'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="发帖入口"><a href="#发帖入口" class="header-anchor">#</a> 发帖入口</h2> <h3 id="布局与样式-5"><a href="#布局与样式-5" class="header-anchor">#</a> 布局与样式</h3> <p>在<code>home.vue</code>添加发帖入口</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add-post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/static/images/add-post.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>修改<code>add-post</code>样式</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.add-post</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 150rpx<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 150rpx<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 999<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>完成效果</p> <p><img src="/notes-page/assets/img/image-20210527004752928.affac181.png" alt="image-20210527004752928"></p> <h3 id="添加事件-3"><a href="#添加事件-3" class="header-anchor">#</a> 添加事件</h3> <p>添加点击事件，点击跳转发帖页面</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">newContent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">'/subcom-pkg/post/post'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <!----> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes-page/project/community-miniapp/1-搭建开发环境.html" class="prev">
        搭建开发环境
      </a></span> <span class="next"><a href="/notes-page/project/community-miniapp/2.1-发贴功能.html">
        发贴功能
      </a>
      →
    </span></p></div>  <div class="el-dialog__wrapper" style="display:none;"><div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog" style="margin-top:15vh;width:420px;"><div class="el-dialog__header"><span class="el-dialog__title"></span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><div class="el-dialog__footer"><span class="dialog-footer"><button type="button" class="el-button el-button--default"><!----><!----><span>取 消</span></button> <button type="button" class="el-button el-button--primary"><!----><!----><span>确 定</span></button></span></div></div></div></main> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/notes-page/assets/js/app.6542a1dc.js" defer></script><script src="/notes-page/assets/js/4.9166b5fb.js" defer></script><script src="/notes-page/assets/js/5.e265b4d0.js" defer></script><script src="/notes-page/assets/js/11.16946e8f.js" defer></script>
  </body>
</html>
